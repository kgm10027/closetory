<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Closetory - ì£¼ê°„ ì½”ë”” ìº˜ë¦°ë”</title>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: "Noto Sans KR", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f5f7fb;
            color: #111827;
        }

        /* ===== ìƒë‹¨ ê³ ì • í—¤ë” ===== */
        .clo-topbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 72px;
            background: #ffffff;
            box-shadow: 0 6px 20px rgba(15,23,42,0.06);
            z-index: 50;
        }
        .clo-top-inner {
            max-width: 1180px;
            margin: 0 auto;
            height: 100%;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .clo-top-left {
            display: flex;
            align-items: center;
            gap: 14px;
        }
        .clo-hamburger {
            width: 36px;
            height: 36px;
            border-radius: 999px;
            border: none;
            background: #111827;
            color: #f9fafb;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .clo-logo-main a {
            text-decoration: none;
            color: inherit;
        }
        .clo-logo-main {
            font-size: 22px;
            font-weight: 900;
            letter-spacing: -0.4px;
            cursor: pointer;
        }
        .clo-logo-sub {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 2px;
        }
        .clo-top-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .clo-search-form {
            display: flex;
            align-items: center;
            background: #f3f4f6;
            border-radius: 999px;
            padding: 6px 12px;
            min-width: 260px;
        }
        .clo-search-icon {
            font-size: 14px;
            color: #6b7280;
            margin-right: 6px;
        }
        .clo-search-input {
            border: none;
            background: transparent;
            outline: none;
            font-size: 13px;
            width: 100%;
        }
        .clo-top-btn {
            height: 36px;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            background: #ffffff;
            padding: 0 14px;
            font-size: 12px;
            cursor: pointer;
            color: #374151;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }
        .clo-top-btn.primary {
            background: #111827;
            color: #f9fafb;
            border-color: #111827;
            font-weight: 600;
        }
        .clo-top-btn:hover {
            background: #f3f4f6;
        }
        .clo-top-btn.primary:hover {
            background: #020617;
        }
        .clo-user-status {
            font-size: 12px;
            color: #6b7280;
            margin-right: 4px;
        }

        /* ===== ì‚¬ì´ë“œë°” ===== */
        .clo-sidebar {
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 230px;
            background: #111827;
            color: #e5e7eb;
            padding: 24px 20px;
            display: flex;
            flex-direction: column;
            gap: 24px;
            transform: translateX(-100%);
            transition: transform .25s ease-out;
            z-index: 60;
        }
        body.clo-sidebar-open .clo-sidebar {
            transform: translateX(0);
        }
        .clo-sidebar-header {
            font-size: 18px;
            font-weight: 800;
        }
        .clo-sidebar-sub {
            font-size: 12px;
            color: #9ca3af;
            margin-top: 2px;
        }
        .clo-menu-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
            font-size: 14px;
        }
        .clo-menu-list li {
            padding: 8px 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: background .2s, color .2s;
        }
        .clo-menu-list li:hover {
            background: #1f2937;
            color: #f9fafb;
        }
        .clo-menu-list li.clo-active {
            background: #fbbf24;
            color: #111827;
            font-weight: 700;
        }
        .clo-sidebar-footer {
            margin-top: auto;
            font-size: 11px;
            color: #6b7280;
        }
        .clo-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(15,23,42,0.35);
            opacity: 0;
            pointer-events: none;
            transition: opacity .2s ease-out;
            z-index: 55;
        }
        body.clo-sidebar-open .clo-backdrop {
            opacity: 1;
            pointer-events: auto;
        }

        /* ===== ë©”ì¸ ì»¨í…ì¸  ë˜í¼ ===== */
        .clo-main-outer {
            padding-top: 96px;
        }
        .clo-main-wrap {
            max-width: 1180px;
            margin: 0 auto;
            padding: 0 24px 40px;
        }

        /* ìƒë‹¨ íƒ€ì´í‹€ */
        .calendar-header {
            margin-bottom: 24px;
        }
        .calendar-header h1 {
            margin: 0;
            font-size: 32px;
            font-weight: 900;
            letter-spacing: -0.5px;
        }
        .calendar-header p {
            margin: 6px 0 0;
            font-size: 14px;
            color: #6b7280;
        }

        /* ì¹´í…Œê³ ë¦¬ íƒ­ (ê³„ì ˆ ì„ íƒ ìŠ¤íƒ€ì¼) */
        .category-tabs {
            margin-top: 16px;
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .category-tab {
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            background: #f3f4f6;
            padding: 6px 14px;
            font-size: 13px;
            cursor: pointer;
            color: #4b5563;
            transition: background .15s, box-shadow .15s, color .15s, border-color .15s;
        }
        .category-tab:hover {
            background: #e5e7eb;
        }
        .category-tab.active {
            background: #ffffff;
            color: #111827;
            border-color: #111827;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(15,23,42,0.06);
        }

        /* ===== ì£¼ê°„ ìŠ¬ë¼ì´ë” ===== */
        .calendar-slider {
            position: relative;
            margin-top: 12px;
        }
        .week-viewport {
            overflow: hidden;
        }
        .week-track {
            display: flex;
            gap: 18px;
            will-change: transform;
            transition: transform .35s ease;
        }

        .day-card {
            flex: 0 0 calc((100% - 2 * 18px) / 3); /* í™”ë©´ì— 3ì¼ ë³´ì´ë„ë¡ */
            background: #ffffff;
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 10px 24px rgba(15,23,42,0.06);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .day-title {
            font-size: 15px;
            font-weight: 700;
        }
        .day-photos-wrap {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .day-img {
            width: 100%;
            height: 140px;
            background: #e5e7eb;
            border-radius: 12px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .day-desc {
            font-size: 13px;
            color: #6b7280;
            line-height: 1.4;
        }
        .heart-btn {
            font-size: 16px;
            cursor: pointer;
            color: #9ca3af;
            align-self: flex-end;
        }
        .heart-btn.active {
            color: #ef4444;
        }

        .week-slide-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 32px;
            height: 32px;
            border-radius: 999px;
            border: none;
            background: rgba(15,23,42,0.7);
            color: #f9fafb;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            z-index: 10;
        }
        .week-slide-btn:hover:not(:disabled) {
            background: rgba(15,23,42,0.9);
        }
        .week-slide-btn:disabled {
            opacity: 0.35;
            cursor: default;
        }
        .week-slide-btn.prev { left: -16px; }
        .week-slide-btn.next { right: -16px; }

        /* ë°˜ì‘í˜• */
        @media (max-width: 960px) {
            .clo-top-inner { padding: 0 16px; }
            .clo-main-wrap { padding: 0 16px 28px; }
            .day-card { flex: 0 0 80%; }
            .week-slide-btn.prev { left: 4px; }
            .week-slide-btn.next { right: 4px; }
        }
    </style>
</head>
<body>

<!-- ì‚¬ì´ë“œë°” -->
<nav class="clo-sidebar">
    <div>
        <div class="clo-sidebar-header">ë©”ë‰´</div>
        <div class="clo-sidebar-sub">Closetory ì˜·ì¥ ë©”ë‰´</div>
    </div>
    <ul class="clo-menu-list">
        <li onclick="location.href='closet.html'">ë‚˜ë§Œì˜ ì˜·ì¥</li>
        <li onclick="location.href='color.html'">ì½”ë”” ìƒ‰ê° ì¶”ì²œ</li>
        <li onclick="location.href='situation.html'">ìƒí™©ë³„ ì½”ë”” ì¶”ì²œ</li>
        <li class="clo-active" onclick="location.href='calendar.html'">ì£¼ê°„ ì½”ë”” ìº˜ë¦°ë”</li>
        <li onclick="location.href='ranking.html'">ì¸ê¸° ì½”ë”” ë­í‚¹</li>
    </ul>
    <div class="clo-sidebar-footer">
        Closetory Â· ì˜·ì¥ì—ì„œ êº¼ë‚´ëŠ” ì‘ì€ í–‰ë³µ
    </div>
</nav>
<div class="clo-backdrop"></div>

<!-- ìƒë‹¨ë°” -->
<header class="clo-topbar">
    <div class="clo-top-inner">
        <div class="clo-top-left">
            <button class="clo-hamburger" id="cloMenuBtn">â˜°</button>
            <div>
                <div class="clo-logo-main">
                    <a href="index.html">Closetory</a>
                </div>
                <div class="clo-logo-sub">ì˜·ì¥ì—ì„œ êº¼ë‚´ëŠ” ì‘ì€ í–‰ë³µ</div>
            </div>
        </div>
        <div class="clo-top-right">
            <form class="clo-search-form" onsubmit="return false;">
                <span class="clo-search-icon">ğŸ”</span>
                <input class="clo-search-input" type="text" placeholder="ì½”ë””, ì•„ì´í…œ ê²€ìƒ‰">
            </form>
            <span class="clo-user-status" id="userStatus"></span>
            <button class="clo-top-btn" id="loginBtn">ë¡œê·¸ì¸</button>
            <button class="clo-top-btn" id="signupBtn">íšŒì›ê°€ì…</button>
            <button class="clo-top-btn primary" id="mypageBtn" style="display:none;">ë§ˆì´í˜ì´ì§€</button>
            <button class="clo-top-btn" id="logoutBtn" style="display:none;">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
    </div>
</header>

<!-- ë©”ì¸ -->
<div class="clo-main-outer">
    <main class="clo-main-wrap">
        <!-- ì œëª© -->
        <section class="calendar-header">
            <h1>ì£¼ê°„ ì½”ë”” ìº˜ë¦°ë”</h1>
            <p>ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì„œ ì˜¤ëŠ˜ì„ ê¸°ì¤€ìœ¼ë¡œ 1ì£¼ì¼ ì½”ë””ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>

            <!-- ì¹´í…Œê³ ë¦¬ íƒ­ (í…ìŠ¤íŠ¸ëŠ” ììœ ë¡­ê²Œ ìˆ˜ì • ê°€ëŠ¥, data-category ê°’ë§Œ ìœ ì§€) -->
            <div class="category-tabs" id="categoryTabs">
                <button class="category-tab active" data-category="daily">ë°ì¼ë¦¬</button>
                <button class="category-tab" data-category="date">ë°ì´íŠ¸</button>
                <button class="category-tab" data-category="campus">ìº í¼ìŠ¤</button>
                <button class="category-tab" data-category="travel">ì—¬í–‰</button>
            </div>
        </section>

        <!-- ì£¼ê°„ ìŠ¬ë¼ì´ë” -->
        <section class="calendar-slider">
            <button class="week-slide-btn prev" id="weekPrevBtn">â€¹</button>
            <div class="week-viewport">
                <div class="week-track" id="weekTrack">
                    <!-- ì›”ìš”ì¼ -->
                    <article class="day-card" data-day-index="0">
                        <div class="day-title">ì›”ìš”ì¼</div>
                        <div class="day-photos-wrap">
                            <div class="day-img"><!-- ì›”ìš”ì¼ ì´ë¯¸ì§€ --></div>
                        </div>
                        <div class="day-desc">ì›”ìš”ì¼ ì½”ë””ì…ë‹ˆë‹¤.</div>
                        <span class="heart-btn">â™¡</span>
                    </article>

                    <!-- í™”ìš”ì¼ -->
                    <article class="day-card" data-day-index="1">
                        <div class="day-title">í™”ìš”ì¼</div>
                        <div class="day-photos-wrap">
                            <div class="day-img"><!-- í™”ìš”ì¼ ì´ë¯¸ì§€ --></div>
                        </div>
                        <div class="day-desc">í™”ìš”ì¼ ì½”ë””ì…ë‹ˆë‹¤.</div>
                        <span class="heart-btn">â™¡</span>
                    </article>

                    <!-- ìˆ˜ìš”ì¼ -->
                    <article class="day-card" data-day-index="2">
                        <div class="day-title">ìˆ˜ìš”ì¼</div>
                        <div class="day-photos-wrap">
                            <div class="day-img"><!-- ìˆ˜ìš”ì¼ ì´ë¯¸ì§€ --></div>
                        </div>
                        <div class="day-desc">ìˆ˜ìš”ì¼ ì½”ë””ì…ë‹ˆë‹¤.</div>
                        <span class="heart-btn">â™¡</span>
                    </article>

                    <!-- ëª©ìš”ì¼ -->
                    <article class="day-card" data-day-index="3">
                        <div class="day-title">ëª©ìš”ì¼</div>
                        <div class="day-photos-wrap">
                            <div class="day-img"><!-- ëª©ìš”ì¼ ì´ë¯¸ì§€ --></div>
                        </div>
                        <div class="day-desc">ëª©ìš”ì¼ ì½”ë””ì…ë‹ˆë‹¤.</div>
                        <span class="heart-btn">â™¡</span>
                    </article>

                    <!-- ê¸ˆìš”ì¼ -->
                    <article class="day-card" data-day-index="4">
                        <div class="day-title">ê¸ˆìš”ì¼</div>
                        <div class="day-photos-wrap">
                            <div class="day-img"><!-- ê¸ˆìš”ì¼ ì´ë¯¸ì§€ --></div>
                        </div>
                        <div class="day-desc">ê¸ˆìš”ì¼ ì½”ë””ì…ë‹ˆë‹¤.</div>
                        <span class="heart-btn">â™¡</span>
                    </article>

                    <!-- í† ìš”ì¼ -->
                    <article class="day-card" data-day-index="5">
                        <div class="day-title">í† ìš”ì¼</div>
                        <div class="day-photos-wrap">
                            <div class="day-img"><!-- í† ìš”ì¼ ì´ë¯¸ì§€ --></div>
                        </div>
                        <div class="day-desc">í† ìš”ì¼ ì½”ë””ì…ë‹ˆë‹¤.</div>
                        <span class="heart-btn">â™¡</span>
                    </article>

                    <!-- ì¼ìš”ì¼ -->
                    <article class="day-card" data-day-index="6">
                        <div class="day-title">ì¼ìš”ì¼</div>
                        <div class="day-photos-wrap">
                            <div class="day-img"><!-- ì¼ìš”ì¼ ì´ë¯¸ì§€ --></div>
                        </div>
                        <div class="day-desc">ì¼ìš”ì¼ ì½”ë””ì…ë‹ˆë‹¤.</div>
                        <span class="heart-btn">â™¡</span>
                    </article>
                </div>
            </div>
            <button class="week-slide-btn next" id="weekNextBtn">â€º</button>
        </section>
    </main>
</div>

<script>
    /* ===== ì‚¬ì´ë“œë°” í† ê¸€ + ê²€ì€ ë°°ê²½ í´ë¦­ ì‹œ ë‹«í˜ ===== */
    const bodyEl  = document.body;
    const menuBtn = document.getElementById('cloMenuBtn');
    const backdrop = document.querySelector('.clo-backdrop');

    function toggleSidebar() {
        bodyEl.classList.toggle('clo-sidebar-open');
    }
    if (menuBtn)  menuBtn.addEventListener('click', toggleSidebar);
    if (backdrop) backdrop.addEventListener('click', () => {
        bodyEl.classList.remove('clo-sidebar-open');
    });

    /* ===== ë¡œê·¸ì¸ / íšŒì›ê°€ì… / ë§ˆì´í˜ì´ì§€ / ë¡œê·¸ì•„ì›ƒ ===== */
    const loginBtn   = document.getElementById('loginBtn');
    const signupBtn  = document.getElementById('signupBtn');
    const logoutBtn  = document.getElementById('logoutBtn');
    const mypageBtn  = document.getElementById('mypageBtn');
    const userStatus = document.getElementById('userStatus');

    function checkAuthState() {
        const raw = localStorage.getItem('closetoryUser');
        if (raw) {
            const user = JSON.parse(raw);
            userStatus.textContent = (user.name || 'ì‚¬ìš©ì') + ' ë‹˜ ë¡œê·¸ì¸ ì¤‘';
            loginBtn.style.display   = 'none';
            signupBtn.style.display  = 'none';
            mypageBtn.style.display  = 'inline-flex';
            logoutBtn.style.display  = 'inline-flex';
        } else {
            userStatus.textContent = '';
            loginBtn.style.display   = 'inline-flex';
            signupBtn.style.display  = 'inline-flex';
            mypageBtn.style.display  = 'none';
            logoutBtn.style.display  = 'none';
        }
    }
    if (loginBtn)  loginBtn.addEventListener('click', () => location.href = 'login.html');
    if (signupBtn) signupBtn.addEventListener('click', () => location.href = 'signup.html');
    if (mypageBtn) mypageBtn.addEventListener('click', () => location.href = 'mypage.html');
    if (logoutBtn) logoutBtn.addEventListener('click', () => {
        localStorage.removeItem('closetoryUser');
        checkAuthState();
        alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
        location.href = 'index.html';
    });
    checkAuthState();

    /* ===== í•˜íŠ¸(ì°œ) í† ê¸€ ===== */
    document.querySelectorAll('.heart-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            btn.classList.toggle('active');
            btn.textContent = btn.classList.contains('active') ? 'â¤' : 'â™¡';
        });
    });

    /* ===== ì¹´í…Œê³ ë¦¬ë³„ 1ì£¼ì¼(ì›”~ì¼) ì´ë¯¸ì§€ ì„¤ì • ===== */
    /*
        â–¼ ì¹´í…Œê³ ë¦¬ë³„ë¡œ 7ì¥(ì›”~ì¼ ìˆœì„œ) ì´ë¯¸ì§€ ê²½ë¡œë§Œ ì±„ì›Œì£¼ë©´ ë¨
           íŒŒì¼ëª…ì€ í”„ë¡œì íŠ¸ì— ì˜¬ë¦° ì´ë¦„ìœ¼ë¡œ ìˆ˜ì •í•´ì„œ ì‚¬ìš©í•˜ë©´ ë¼!
           í•„ìš” ì—†ê±°ë‚˜ ì•„ì§ ì—†ëŠ” ì¹¸ì€ ë¹ˆ ë¬¸ìì—´("")ë¡œ ë‘ë©´ íšŒìƒ‰ ë°•ìŠ¤ë¡œ í‘œì‹œë¨.
    */
    const CATEGORY_IMAGE_PATHS = {
        daily: [
            'images/daily_mon.jpg', // 0: ì›”ìš”ì¼
            'images/daily_tue.jpg', // 1: í™”ìš”ì¼
            'images/daily_wed.jpg', // 2: ìˆ˜ìš”ì¼
            'images/daily_thu.jpg', // 3: ëª©ìš”ì¼
            'images/daily_fri.jpg', // 4: ê¸ˆìš”ì¼
            'images/daily_sat.jpg', // 5: í† ìš”ì¼
            'images/daily_sun.jpg'  // 6: ì¼ìš”ì¼
        ],
        date: [
            'images/date_mon.jpg',
            'images/date_tue.jpg',
            'images/date_wed.jpg',
            'images/date_thu.jpg',
            'images/date_fri.jpg',
            'images/date_sat.jpg',
            'images/date_sun.jpg'
        ],
        campus: [
            'images/campus_mon.jpg',
            'images/campus_tue.jpg',
            'images/campus_wed.jpg',
            'images/campus_thu.jpg',
            'images/campus_fri.jpg',
            'images/campus_sat.jpg',
            'images/campus_sun.jpg'
        ],
        travel: [
            'images/travel_mon.jpg',
            'images/travel_tue.jpg',
            'images/travel_wed.jpg',
            'images/travel_thu.jpg',
            'images/travel_fri.jpg',
            'images/travel_sat.jpg',
            'images/travel_sun.jpg'
        ]
    };

    const weekdayLabels = ['ì›”ìš”ì¼','í™”ìš”ì¼','ìˆ˜ìš”ì¼','ëª©ìš”ì¼','ê¸ˆìš”ì¼','í† ìš”ì¼','ì¼ìš”ì¼'];

    const categoryTabs = document.querySelectorAll('.category-tab');
    let activeCategory = 'daily';

    function applyCategory(categoryKey) {
        activeCategory = categoryKey;
        const imageList = CATEGORY_IMAGE_PATHS[categoryKey] || [];
        const activeTabEl = document.querySelector(`.category-tab[data-category="${categoryKey}"]`);
        const categoryName = activeTabEl ? activeTabEl.textContent.trim() : '';

        document.querySelectorAll('.day-card').forEach(card => {
            const dayIndex = Number(card.dataset.dayIndex); // 0=ì›” ~ 6=ì¼
            const imgEl = card.querySelector('.day-img');
            const descEl = card.querySelector('.day-desc');
            const path = imageList[dayIndex] || '';

            if (imgEl) {
                if (path) {
                    imgEl.style.backgroundImage = `url('${path}')`;
                } else {
                    imgEl.style.backgroundImage = 'none';
                }
            }
            if (descEl) {
                const weekdayName = weekdayLabels[dayIndex] || '';
                if (categoryName) {
                    descEl.textContent = `${categoryName} Â· ${weekdayName} ì½”ë””`;
                } else {
                    descEl.textContent = `${weekdayName} ì½”ë””`;
                }
            }
        });
    }

    categoryTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const category = tab.dataset.category;
            categoryTabs.forEach(t => t.classList.toggle('active', t === tab));
            resetToTodayWindow();
            applyCategory(category);
        });
    });

    /* ===== ì£¼ê°„ ìŠ¬ë¼ì´ë” (3ê°œì”© ë³´ê¸°, ì˜¤ëŠ˜ì´ ì²« ì¹´ë“œ) ===== */
    const weekTrack   = document.getElementById('weekTrack');
    const weekPrevBtn = document.getElementById('weekPrevBtn');
    const weekNextBtn = document.getElementById('weekNextBtn');

    let dayCards = Array.from(weekTrack.children);
    const VISIBLE_COUNT = 3;
    const GAP = 18; // CSS gapê³¼ ë™ì¼

    let slideIndex = 0; // í˜„ì¬ ì™¼ìª½ ì¹´ë“œì˜ ì¸ë±ìŠ¤
    let cardStep = 0;
    let maxIndex = Math.max(0, dayCards.length - VISIBLE_COUNT);

    // JS getDay() 0=ì¼,1=ì›”,...6=í†  â†’ ì›”=0, í™”=1,... ì¼=6 ë³€í™˜
    function getMondayBasedIndex(jsDay) {
        return (jsDay + 6) % 7;
    }

    // ì˜¤ëŠ˜ ìš”ì¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì¹´ë“œ ìˆœì„œë¥¼ íšŒì „ (ì˜¤ëŠ˜ì´ ë§¨ ì•)
    function sortDaysByToday() {
        const today = new Date();
        const jsDay = today.getDay(); // 0=ì¼ ~ 6=í† 
        const mondayBasedToday = getMondayBasedIndex(jsDay); // 0=ì›” ~ 6=ì¼

        dayCards = Array.from(weekTrack.children);
        const sorted = dayCards.slice().sort((a, b) => {
            const aIndex = Number(a.dataset.dayIndex); // 0=ì›” ~ 6=ì¼
            const bIndex = Number(b.dataset.dayIndex);
            const aOffset = (aIndex - mondayBasedToday + 7) % 7;
            const bOffset = (bIndex - mondayBasedToday + 7) % 7;
            return aOffset - bOffset;
        });

        sorted.forEach(card => weekTrack.appendChild(card));
        dayCards = sorted;
        slideIndex = 0; // íšŒì „ í›„ ì˜¤ëŠ˜ì´ ë§¨ ì•ì´ë¯€ë¡œ 0ì—ì„œ ì‹œì‘
        updateMetrics();
    }

    function recalcMaxIndex() {
        maxIndex = Math.max(0, dayCards.length - VISIBLE_COUNT);
    }

    function updateNavButtons() {
        if (!weekPrevBtn || !weekNextBtn) return;
        recalcMaxIndex();
        weekPrevBtn.disabled = (slideIndex <= 0);
        weekNextBtn.disabled = (slideIndex >= maxIndex);
    }

    // ì¹´ë“œ í­ ê³„ì‚° ë° í˜„ì¬ ì¸ë±ìŠ¤ë¡œ ì´ë™ (ë¦¬ì‚¬ì´ì¦ˆ ëŒ€ì‘)
    function updateMetrics() {
        if (!dayCards.length) return;
        const first = dayCards[0];
        const rect = first.getBoundingClientRect();
        cardStep = rect.width + GAP;

        weekTrack.style.transition = 'none';
        weekTrack.style.transform = `translateX(-${slideIndex * cardStep}px)`;
        requestAnimationFrame(() => {
            weekTrack.style.transition = 'transform .35s ease';
        });

        updateNavButtons();
    }

    // ìŠ¬ë¼ì´ë“œ ì´ë™ (í•˜ë£¨ì”© ì´ë™, ëì—ì„œëŠ” ë©ˆì¶¤)
    function goToSlide(idx) {
        if (cardStep === 0) return;
        recalcMaxIndex();
        slideIndex = Math.min(Math.max(idx, 0), maxIndex);
        weekTrack.style.transform = `translateX(-${slideIndex * cardStep}px)`;
        updateNavButtons();
    }

    function resetToTodayWindow() {
        slideIndex = 0;
        if (cardStep !== 0) {
            goToSlide(0);
        }
    }

    if (weekPrevBtn) {
        weekPrevBtn.addEventListener('click', () => {
            goToSlide(slideIndex - 1);
        });
    }
    if (weekNextBtn) {
        weekNextBtn.addEventListener('click', () => {
            goToSlide(slideIndex + 1);
        });
    }

    window.addEventListener('load', () => {
        sortDaysByToday();   // ì˜¤ëŠ˜ì´ ì²« ì¹´ë“œê°€ ë˜ë„ë¡ ì •ë ¬ (ì˜ˆ: ëª©ìš”ì¼ì´ë©´ (ëª©Â·ê¸ˆÂ·í† )ë¶€í„°)
        applyCategory(activeCategory); // ê¸°ë³¸ ì¹´í…Œê³ ë¦¬(ë°ì¼ë¦¬) ì´ë¯¸ì§€ ì„¸íŒ…
    });
    window.addEventListener('resize', updateMetrics);
</script>

</body>
</html>
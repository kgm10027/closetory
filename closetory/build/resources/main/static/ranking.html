<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Closetory - ì¸ê¸° ì½”ë”” ë­í‚¹</title>
    <style>
        * { box-sizing: border-box; }
        body {
          margin: 0;
          font-family: "Noto Sans KR", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
          background: #f5f7fb;
          color: #111827;
        }

        /* ===== ìƒë‹¨ ê³ ì • í—¤ë” ===== */
        .clo-topbar {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          height: 72px;
          background: #ffffff;
          box-shadow: 0 6px 20px rgba(15,23,42,0.06);
          z-index: 50;
        }
        .clo-top-inner {
          max-width: 1180px;
          margin: 0 auto;
          height: 100%;
          padding: 0 24px;
          display: flex;
          align-items: center;
          justify-content: space-between;
        }
        .clo-top-left {
          display: flex;
          align-items: center;
          gap: 14px;
        }
        .clo-hamburger {
          width: 36px;
          height: 36px;
          border-radius: 999px;
          border: none;
          background: #111827;
          color: #f9fafb;
          font-size: 18px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .clo-logo-main {
          font-size: 22px;
          font-weight: 900;
          letter-spacing: -0.4px;
        }
        .clo-logo-sub {
          font-size: 11px;
          color: #9ca3af;
          margin-top: 2px;
        }
        .clo-top-right {
          display: flex;
          align-items: center;
          gap: 10px;
        }
        .clo-search-form {
          display: flex;
          align-items: center;
          background: #f3f4f6;
          border-radius: 999px;
          padding: 6px 12px;
          min-width: 260px;
        }
        .clo-search-icon {
          font-size: 14px;
          color: #6b7280;
          margin-right: 6px;
        }
        .clo-search-input {
          border: none;
          background: transparent;
          outline: none;
          font-size: 13px;
          width: 100%;
        }
        .clo-top-btn {
          height: 36px;
          border-radius: 999px;
          border: 1px solid #e5e7eb;
          background: #ffffff;
          padding: 0 14px;
          font-size: 12px;
          cursor: pointer;
          color: #374151;
          display: flex;
          align-items: center;
          justify-content: center;
          white-space: nowrap;
        }
        .clo-top-btn.primary {
          background: #111827;
          color: #f9fafb;
          border-color: #111827;
          font-weight: 600;
        }
        .clo-top-btn:hover { background: #f3f4f6; }
        .clo-top-btn.primary:hover { background: #020617; }
        .clo-user-label {
          font-size: 12px;
          color: #4b5563;
        }

        /* ===== ì‚¬ì´ë“œë°” ===== */
        .clo-sidebar {
          position: fixed;
          top: 0;
          left: 0;
          bottom: 0;
          width: 230px;
          background: #111827;
          color: #e5e7eb;
          padding: 24px 20px;
          display: flex;
          flex-direction: column;
          gap: 24px;
          transform: translateX(-100%);
          transition: transform .25s ease-out;
          z-index: 60;
        }
        body.clo-sidebar-open .clo-sidebar {
          transform: translateX(0);
        }
        .clo-sidebar-header {
          font-size: 18px;
          font-weight: 800;
        }
        .clo-sidebar-sub {
          font-size: 12px;
          color: #9ca3af;
          margin-top: 2px;
        }
        .clo-menu-list {
          list-style: none;
          padding: 0;
          margin: 0;
          display: flex;
          flex-direction: column;
          gap: 10px;
          font-size: 14px;
        }
        .clo-menu-list li {
          padding: 8px 10px;
          border-radius: 8px;
          cursor: pointer;
          transition: background .2s, color .2s;
        }
        .clo-menu-list li:hover {
          background: #1f2937;
          color: #f9fafb;
        }
        .clo-menu-list li.clo-active {
          background: #fbbf24;
          color: #111827;
          font-weight: 700;
        }
        .clo-sidebar-footer {
          margin-top: auto;
          font-size: 11px;
          color: #6b7280;
        }
        .clo-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(15,23,42,0.35);
          opacity: 0;
          pointer-events: none;
          transition: opacity .2s ease-out;
          z-index: 55;
        }
        body.clo-sidebar-open .clo-backdrop {
          opacity: 1;
          pointer-events: auto;
        }

        /* ===== ë©”ì¸ ë˜í¼ ===== */
        .clo-main-outer { padding-top: 96px; }
        .clo-main-wrap {
          max-width: 1180px;
          margin: 0 auto;
          padding: 0 24px 40px;
        }

        /* ===== í—¤ë” ===== */
        .rank-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-end;
          gap: 16px;
          margin-bottom: 20px;
        }
        .rank-title-box h1 {
          margin: 0;
          font-size: 30px;
          font-weight: 900;
          letter-spacing: -0.5px;
        }
        .rank-title-box p {
          margin: 4px 0 0;
          font-size: 14px;
          color: #6b7280;
        }
        .rank-tagline {
          font-size: 12px;
          padding: 6px 10px;
          border-radius: 999px;
          background: #e5f0ff;
          color: #1d4ed8;
        }

        /* ===== ì‹œì¦Œ íƒ­ ===== */
        .rank-season-tabs {
          display: flex;
          align-items: center;
          gap: 10px;
          margin-bottom: 18px;
        }
        .rank-season-label {
          font-size: 13px;
          font-weight: 700;
          color: #4b5563;
        }
        .rank-season-btns {
          display: flex;
          gap: 8px;
        }
        .rank-season-btn {
          border-radius: 999px;
          border: 1px solid #e5e7eb;
          background: #ffffff;
          padding: 6px 14px;
          font-size: 12px;
          cursor: pointer;
          color: #4b5563;
        }
        .rank-season-btn.active {
          background: #111827;
          color: #f9fafb;
          border-color: #111827;
          font-weight: 600;
        }

        /* ===== ë­í‚¹ ì¹´ë“œ ê·¸ë¦¬ë“œ ===== */
        .rank-panel {
          background: #ffffff;
          border-radius: 18px;
          padding: 16px 18px 18px;
          box-shadow: 0 12px 28px rgba(15,23,42,0.06);
        }
        .rank-caption {
          font-size: 12px;
          color: #6b7280;
          margin-bottom: 10px;
        }
        .rank-grid {
          display: grid;
          grid-template-columns: repeat(4, minmax(0, 1fr));
          gap: 14px;
        }
        .rank-card {
          border-radius: 14px;
          padding: 10px 11px 12px;
          background: #f9fafb;
          display: flex;
          flex-direction: column;
          gap: 6px;
          position: relative;
          cursor: pointer;
        }
        .rank-badge {
          position: absolute;
          top: 8px;
          left: 8px;
          padding: 3px 7px;
          border-radius: 999px;
          font-size: 11px;
          font-weight: 700;
          color: #0f172a;
          background: #fee2e2;
          z-index: 2;
        }
        .rank-badge.top3 {
          background: linear-gradient(135deg,#f97316,#facc15);
          color: #111827;
        }

        /* ì¸ë„¤ì¼: ì´ë¯¸ì§€ê°€ ì˜ë¦¬ì§€ ì•Šê³  ì „ë¶€ ë³´ì´ê²Œ */
        .rank-thumb {
          width: 100%;
          height: 180px;
          border-radius: 10px;
          background: #e5e7eb;
          overflow: hidden;
          margin-top: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        .rank-thumb img {
          width: 100%;
          height: 100%;
          object-fit: contain;
          object-position: center;
          display: block;
        }

        .rank-title {
          margin-top: 6px;
          font-size: 13px;
          font-weight: 700;
        }
        .rank-tags {
          display: flex;
          flex-wrap: wrap;
          gap: 4px;
          font-size: 10px;
        }
        .rank-tag {
          padding: 2px 6px;
          border-radius: 999px;
          background: #e5ecff;
          color: #374151;
        }
        .rank-desc {
          font-size: 11px;
          color: #6b7280;
          line-height: 1.45;
        }
        .rank-meta {
          margin-top: 2px;
          font-size: 10px;
          color: #9ca3af;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        .rank-like-btn {
          border-radius: 999px;
          border: none;
          padding: 4px 8px;
          font-size: 11px;
          display: inline-flex;
          align-items: center;
          gap: 4px;
          cursor: pointer;
          background: #fee2e2;
          color: #b91c1c;
        }

        /* ì°œ ì™„ë£Œ ìƒíƒœ í‘œì‹œ (í•´ì œ ê°€ëŠ¥í•˜ë¯€ë¡œ cursor ëŠ” ê·¸ëŒ€ë¡œ pointer) */
        .rank-like-btn.is-favorited {
          background: #fee2e2;
          color: #b91c1c;
          opacity: .85;
        }
        #modalFavBtn.is-favorited {
          background: #6b7280;
          color: #f9fafb;
        }

        /* ===== í˜ì´ì§€ë„¤ì´ì…˜ ===== */
        .rank-pagination {
          margin-top: 14px;
          display: flex;
          justify-content: center;
          gap: 6px;
          align-items: center;
          font-size: 12px;
        }
        .page-btn {
          border-radius: 999px;
          border: 1px solid #e5e7eb;
          background: #ffffff;
          padding: 4px 9px;
          min-width: 28px;
          text-align: center;
          cursor: pointer;
          color: #4b5563;
        }
        .page-btn:hover {
          background: #f3f4f6;
        }
        .page-btn.active {
          background: #111827;
          color: #f9fafb;
          border-color: #111827;
          font-weight: 700;
        }
        .page-btn.disabled {
          opacity: .35;
          cursor: default;
        }

        /* ===== ìƒì„¸ ëª¨ë‹¬ ===== */
        .rank-modal-backdrop {
          position: fixed;
          inset: 0;
          background: rgba(15,23,42,0.45);
          display: none;
          align-items: center;
          justify-content: center;
          z-index: 80;
        }
        .rank-modal-backdrop.show {
          display: flex;
        }
        .rank-modal {
          width: 520px;
          max-width: 90vw;
          max-height: 90vh;
          background: #ffffff;
          border-radius: 18px;
          box-shadow: 0 18px 40px rgba(15,23,42,0.25);
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }
        .rank-modal-header {
          padding: 14px 18px 10px;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          gap: 10px;
        }
        .rank-modal-header h2 {
          margin: 0;
          font-size: 18px;
          font-weight: 800;
        }
        .rank-modal-close {
          border: none;
          background: none;
          font-size: 18px;
          cursor: pointer;
          color: #9ca3af;
        }
        .rank-modal-thumb {
          width: 100%;
          height: 260px;
          background: #e5e7eb;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
        }
        .rank-modal-thumb img {
          width: 100%;
          height: 100%;
          object-fit: contain;
          object-position: center;
        }
        .rank-modal-body {
          padding: 10px 18px 18px;
          font-size: 13px;
          color: #4b5563;
        }
        .rank-modal-tags {
          display: flex;
          flex-wrap: wrap;
          gap: 4px;
          margin: 4px 0 6px;
          font-size: 11px;
        }
        .rank-modal-tags .rank-tag { font-size: 11px; }
        .rank-modal-meta {
          font-size: 12px;
          color: #6b7280;
          margin-bottom: 8px;
        }
        .rank-modal-like-btn {
          margin-top: 8px;
          padding: 8px 14px;
          border-radius: 999px;
          border: none;
          background: #111827;
          color: #f9fafb;
          font-size: 13px;
          cursor: pointer;
          display: inline-flex;
          align-items: center;
          gap: 6px;
        }
        .rank-modal-note {
          margin-top: 6px;
          font-size: 11px;
          color: #9ca3af;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 1080px) {
          .rank-grid {
            grid-template-columns: repeat(3, minmax(0, 1fr));
          }
        }
        @media (max-width: 880px) {
          .clo-top-inner { padding: 0 16px; }
          .clo-main-wrap { padding: 0 16px 28px; }
          .rank-grid {
            grid-template-columns: repeat(2, minmax(0, 1fr));
          }
        }
        @media (max-width: 640px) {
          .rank-grid {
            grid-template-columns: 1fr;
          }
        }
    </style>
</head>
<body>

<!-- ì‚¬ì´ë“œë°” -->
<nav class="clo-sidebar">
    <div>
        <div class="clo-sidebar-header">ë©”ë‰´</div>
        <div class="clo-sidebar-sub">Closetory ì˜·ì¥ ë©”ë‰´</div>
    </div>
    <ul class="clo-menu-list">
        <li onclick="location.href='closet.html'">ë‚˜ë§Œì˜ ì˜·ì¥</li>
        <li onclick="location.href='color.html'">ì½”ë”” ìƒ‰ê° ì¶”ì²œ</li>
        <li onclick="location.href='situation.html'">ìƒí™©ë³„ ì½”ë”” ì¶”ì²œ</li>
        <li onclick="location.href='calendar.html'">ì£¼ê°„ ì½”ë”” ìº˜ë¦°ë”</li>
        <li class="clo-active" onclick="location.href='ranking.html'">ì¸ê¸° ì½”ë”” ë­í‚¹</li>
    </ul>
    <div class="clo-sidebar-footer">
        Closetory Â· ì˜·ì¥ì—ì„œ êº¼ë‚´ëŠ” ì‘ì€ í–‰ë³µ
    </div>
</nav>
<div class="clo-backdrop"></div>

<!-- ìƒë‹¨ë°” -->
<header class="clo-topbar">
    <div class="clo-top-inner">
        <div class="clo-top-left">
            <button class="clo-hamburger" id="cloMenuBtn">â˜°</button>
            <div>
                <a href="index.html" style="text-decoration:none;color:inherit;">
                    <div class="clo-logo-main">Closetory</div>
                    <div class="clo-logo-sub">ì˜·ì¥ì—ì„œ êº¼ë‚´ëŠ” ì‘ì€ í–‰ë³µ</div>
                </a>
            </div>
        </div>
        <div class="clo-top-right">
            <form class="clo-search-form" onsubmit="return false;">
                <span class="clo-search-icon">ğŸ”</span>
                <input class="clo-search-input" type="text" placeholder="ì½”ë””, ì•„ì´í…œ ê²€ìƒ‰">
            </form>

            <!-- ë¹„ë¡œê·¸ì¸ -->
            <div id="cloAuthLoggedOut">
                <button class="clo-top-btn" onclick="location.href='login.html'">ë¡œê·¸ì¸</button>
                <button class="clo-top-btn" onclick="location.href='signup.html'">íšŒì›ê°€ì…</button>
            </div>

            <!-- ë¡œê·¸ì¸ ìƒíƒœ -->
            <div id="cloAuthLoggedIn" style="display:none;align-items:center;gap:8px;">
        <span class="clo-user-label">
          <strong id="cloUserName"></strong> ë‹˜
        </span>
                <button class="clo-top-btn" onclick="location.href='mypage.html'">ë§ˆì´í˜ì´ì§€</button>
                <button class="clo-top-btn primary" id="cloLogoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </div>
</header>

<!-- ë©”ì¸ -->
<div class="clo-main-outer">
    <main class="clo-main-wrap">

        <!-- í—¤ë” -->
        <section class="rank-header">
            <div class="rank-title-box">
                <h1>ì¸ê¸° ì½”ë”” ë­í‚¹</h1>
                <p>ë´„Â·ì—¬ë¦„Â·ê°€ì„Â·ê²¨ìš¸ë³„ë¡œ ì§€ê¸ˆ ê°€ì¥ ë§ì´ ì €ì¥ëœ ì½”ë”” TOP 8ì„ í™•ì¸í•´ ë³´ì„¸ìš”.</p>
            </div>
            <div class="rank-tagline">ì‹¤ì‹œê°„ ì¸ê¸° ì½”ë”” TOP 8</div>
        </section>

        <!-- ì‹œì¦Œ íƒ­ -->
        <section class="rank-season-tabs">
            <span class="rank-season-label">ê³„ì ˆ ì„ íƒ</span>
            <div class="rank-season-btns">
                <button class="rank-season-btn active" data-season="spring">ë´„</button>
                <button class="rank-season-btn" data-season="summer">ì—¬ë¦„</button>
                <button class="rank-season-btn" data-season="autumn">ê°€ì„</button>
                <button class="rank-season-btn" data-season="winter">ê²¨ìš¸</button>
            </div>
        </section>

        <!-- ë­í‚¹ íŒ¨ë„ -->
        <section class="rank-panel">
            <div class="rank-caption" id="rankCaption">
                ë´„ ì‹œì¦Œ ì¸ê¸° ì½”ë”” TOP 8 Â· 1í˜ì´ì§€ (8ê°œì”© í‘œì‹œ)
            </div>

            <div class="rank-grid" id="rankGrid"></div>

            <div class="rank-pagination" id="rankPagination"></div>
        </section>
    </main>
</div>

<!-- ìƒì„¸ ëª¨ë‹¬ -->
<div class="rank-modal-backdrop" id="rankModalBackdrop">
    <div class="rank-modal">
        <div class="rank-modal-header">
            <h2 id="modalTitle">ì½”ë”” ì œëª©</h2>
            <button class="rank-modal-close" id="modalCloseBtn">Ã—</button>
        </div>
        <div class="rank-modal-thumb">
            <img id="modalImage" src="" alt="">
        </div>
        <div class="rank-modal-body">
            <div class="rank-modal-tags" id="modalTags"></div>
            <div class="rank-modal-meta" id="modalMeta"></div>
            <p id="modalDesc"></p>

            <button class="rank-modal-like-btn" id="modalFavBtn">
                â™¡ ë‚˜ë§Œì˜ ì˜·ì¥ì— ë‹´ê¸°
            </button>
            <div class="rank-modal-note">
                â€» ì°œí•œ ì½”ë””ëŠ” 'ë‚˜ë§Œì˜ ì˜·ì¥' í˜ì´ì§€ì—ì„œ ëª¨ì•„ë³¼ ìˆ˜ ìˆì–´ìš”.
            </div>
        </div>
    </div>
</div>

<script>
    // ==== ê³µí†µ: ë‚˜ë§Œì˜ ì˜·ì¥ ì°œ ë°ì´í„° ====
    const FAVORITES_KEY = 'closetoryFavorites';

    function loadFavorites() {
      try {
        return JSON.parse(localStorage.getItem(FAVORITES_KEY) || '[]');
      } catch (_) {
        return [];
      }
    }

    function saveFavorites(list) {
      localStorage.setItem(FAVORITES_KEY, JSON.stringify(list));
    }

    // ê³ ìœ  ì°œ ID ìƒì„±
    function makeFavoriteId(item, season, rank) {
      return item.id || `${season}-${rank}-${item.title}`;
    }

    function isFavoriteById(favId) {
      return loadFavorites().some(v => String(v.id) === String(favId));
    }

    function removeFavoriteById(favId) {
      const list = loadFavorites();
      const idx = list.findIndex(v => String(v.id) === String(favId));
      if (idx === -1) return false;
      list.splice(idx, 1);
      saveFavorites(list);
      return true;
    }

    // ë­í‚¹ì—ì„œ ì°œ ì¶”ê°€
    function addFavoriteFromRanking(item, season, rank) {
      const favId = makeFavoriteId(item, season, rank);
      const list  = loadFavorites();

      if (list.some(v => String(v.id) === String(favId))) {
        return false;
      }

      const fav = {
        id: favId,
        title: item.title,
        description: item.desc,
        colors: item.colors || [],
        types: item.tags || [],
        situations: item.tags || [],
        imageUrl: item.imageUrl || '',
        createdAt: Date.now(),
        isFavorite: true,
        from: `ranking-${season}`
      };

      list.push(fav);
      saveFavorites(list);
      return true;
    }

    /* ===== ì‚¬ì´ë“œë°” í† ê¸€ ===== */
    const bodyEl = document.body;
    const menuBtn = document.getElementById('cloMenuBtn');
    const backdrop = document.querySelector('.clo-backdrop');

    function toggleSidebar() {
      bodyEl.classList.toggle('clo-sidebar-open');
    }
    menuBtn.addEventListener('click', toggleSidebar);
    backdrop.addEventListener('click', toggleSidebar);

    /* ===== ë¡œê·¸ì¸ ìƒíƒœ UI ===== */
    function refreshAuthUI() {
      const data = localStorage.getItem('closetoryUser');
      const loggedInFlag = localStorage.getItem('closetoryLoggedIn') === 'true';
      const user = data ? JSON.parse(data) : null;
      const isLoggedIn = !!(loggedInFlag && user);

      const outBox = document.getElementById('cloAuthLoggedOut');
      const inBox  = document.getElementById('cloAuthLoggedIn');
      const nameSpan = document.getElementById('cloUserName');

      if (!outBox || !inBox) return;

      if (isLoggedIn) {
        outBox.style.display = 'none';
        inBox.style.display  = 'flex';
        if (nameSpan) {
          nameSpan.textContent = user.name || user.userId || 'ì‚¬ìš©ì';
        }
      } else {
        outBox.style.display = 'flex';
        inBox.style.display  = 'none';
      }
    }

    function setupLogout() {
      const btn = document.getElementById('cloLogoutBtn');
      if (!btn) return;
      btn.addEventListener('click', function () {
        localStorage.setItem('closetoryLoggedIn', 'false');
        alert('ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.');
        refreshAuthUI();
      });
    }

    /* ===== ì¸ê¸° ì½”ë”” ë°ì´í„° (ê° ê³„ì ˆ 8ê°œ) ===== */
    const rankingData = {
      spring: [
        { title: "ì˜¬ë°ë‹˜ ì í”„ìˆ˜íŠ¸ ë°ì¼ë¦¬ë£©",
          tags:["ìºì£¼ì–¼ë£©","ì›ë§ˆì¼/ë°ì¼ë¦¬ë£©","ì‹¬í”Œ ë‚¨ì¹œë£©"],
          desc:"ì‹œì›í•˜ê³  í¸ì•ˆí•œ ë°ë‹˜ ì˜¬ì¸ì› ìŠ¤íƒ€ì¼. ì‹ ê²½ ì•ˆ ì“´ ë“¯ ìì—°ìŠ¤ëŸ½ì§€ë§Œ ì€ê·¼íˆ ë©‹ìˆëŠ” ë´„ ë°ì¼ë¦¬ë£©. ì…€ì¹´/í° ì†Œí’ˆì´ í˜„ëŒ€ì ì¸ ê°ì„±ê¹Œì§€ ë”í•œ ì½”ë””.",
          saves: 320,
          imageUrl: "images/image4.png" },
        { title: "ìº í¼ìŠ¤ ìƒˆë‚´ê¸° ì½”ë””",
          tags:["ë§¨íˆ¬ë§¨","ë°ë‹˜","ìŠ¤ë‹ˆì»¤ì¦ˆ"],
          desc:"íŒŒìŠ¤í…” ë§¨íˆ¬ë§¨ê³¼ ì—°ì²­ ë°ë‹˜ìœ¼ë¡œ í¸ì•ˆí•œ ìƒˆë‚´ê¸° ê°ì„±.",
          saves: 295,
          imageUrl: "images/image9.png" },
        { title: "ë´„ ì˜¤í”¼ìŠ¤ ì„¸ë¯¸í¬ë©€",
          tags:["ìì¼“","ìŠ¬ë™ìŠ¤","ì…”ì¸ "],
          desc:"ë¼ì´íŠ¸ ê·¸ë ˆì´ ìì¼“ê³¼ ìŠ¬ë™ìŠ¤ë¡œ ê°€ë³ì§€ë§Œ ë‹¨ì •í•œ ì¶œê·¼ ì½”ë””.",
          saves: 270,
          imageUrl: "images/image.png" },
        { title: "í›„ë“œ ì§‘ì—… ë ˆì´ì–´ë“œ",
          tags:["í›„ë“œì§‘ì—…","ì½”íŠ¸","ì¡°ê±°"],
          desc:"ì–‡ì€ í›„ë“œì§‘ì—… ìœ„ì— ì½”íŠ¸ë¥¼ ê±¸ì¹œ ë ˆì´ì–´ë“œ ìŠ¤íŠ¸ë¦¿ ë£©.",
          saves: 240,
          imageUrl: "images/image.png" },
        { title: "ë‹¤í¬ë¸Œë¼ìš´ í´ë˜ì‹ ìˆ˜íŠ¸ ì½”ë””",
  tags: ["ë¸Œë¼ìš´ìˆ˜íŠ¸", "í´ë˜ì‹", "ê°€ì„ì½”ë””", "ì„¸ë ¨ëœ", "ë°ì´íŠ¸ë£©"],
  desc: "ë‹¤í¬ë¸Œë¼ìš´ ìˆ˜íŠ¸ì™€ ì•„ì´ë³´ë¦¬ ì´ë„ˆë¡œ ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë¶„ìœ„ê¸°ë¥¼ ê°•ì¡°í•œ í´ë˜ì‹ í¬ë©€ë£©. ì„±ìˆ™í•œ ê°ì„±ì˜ ë°ì´íŠ¸ ì½”ë””.",
          saves: 210,
          imageUrl: "images/image12.png" },
        { title: "íŒŒìŠ¤í…” ë‹ˆíŠ¸ ë°ì´íŠ¸",
          tags:["ë‹ˆíŠ¸","ë¡±ìŠ¤ì»¤íŠ¸","í”Œë«ìŠˆì¦ˆ"],
          desc:"ë¯¼íŠ¸ ë‹ˆíŠ¸ì™€ í¬ë¦¼ ë¡±ìŠ¤ì»¤íŠ¸ ì¡°í•©ì˜ ì†Œí”„íŠ¸í•œ ë°ì´íŠ¸ ì½”ë””.",
          saves: 205,
          imageUrl: "images/image.png" },
        { title: "ë°”ëŒë§‰ì´ ìº í•‘ë£©",
          tags:["ë°”ëŒë§‰ì´","ì¹´ê³ íŒ¬ì¸ ","ìº í•‘"],
          desc:"ë¼ì´íŠ¸ ê·¸ë¦° ë°”ëŒë§‰ì´ì™€ ì¹´ê³  íŒ¬ì¸ ë¡œ í™œë™ì„± ì¢‹ì€ ìº í•‘ ì½”ë””.",
          saves: 190,
          imageUrl: "images/image.png" },
        { title: "ì…”ì¸  ì›í”¼ìŠ¤ ëŸ¬ë¸”ë¦¬",
          tags:["ì…”ì¸ ì›í”¼ìŠ¤","ì¹´ë””ê±´","ë¡œí¼"],
          desc:"í™”ì´íŠ¸ ì…”ì¸  ì›í”¼ìŠ¤ì— íŒŒìŠ¤í…” ì¹´ë””ê±´ì„ ë”í•œ ëŸ¬ë¸”ë¦¬ ë£©.",
          saves: 180,
          imageUrl: "images/image.png" }
      ],
      summer: [
        { title: "ë¦°ë„¨ ì…‹ì—… ì¿¨ë¹„ì¦ˆ",
          tags:["ë¦°ë„¨ì…”ì¸ ","ë¦°ë„¨íŒ¬ì¸ ","ìƒŒë“¤"],
          desc:"ë² ì´ì§€ ë¦°ë„¨ ì…‹ì—…ìœ¼ë¡œ ì‹œì›í•œ ì—¬ë¦„ ì˜¤í”¼ìŠ¤ë£©.",
          saves: 300,
          imageUrl: "images/image.png" },
        { title: "ë°”ìº‰ìŠ¤ í•˜ì™€ì´ì•ˆ ì…”ì¸ ",
          tags:["í•˜ì™€ì´ì•ˆì…”ì¸ ","ë°˜ë°”ì§€","ìŠ¬ë¦¬í¼"],
          desc:"ì•Œë¡ë‹¬ë¡ ì…”ì¸ ì™€ í™”ì´íŠ¸ ë°˜ë°”ì§€ë¡œ ë°”ìº‰ìŠ¤ ëŠë‚Œ ê°€ë“.",
          saves: 280,
          imageUrl: "images/image.png" },
        { title: "ë¯¼ì†Œë§¤ + ì™€ì´ë“œ íŒ¬ì¸ ",
          tags:["ë¯¼ì†Œë§¤","ì™€ì´ë“œíŒ¬ì¸ "],
          desc:"ë¸”ë™ ë¯¼ì†Œë§¤ì™€ ë¦°ë„¨ ì™€ì´ë“œ íŒ¬ì¸ ë¡œ ê¹”ë”í•œ ì¸ë¨¸ ëª¨ë…¸í†¤.",
          saves: 260,
          imageUrl: "images/image.png" },
        { title: "ë°˜íŒ” ì…”ì¸  ìº í¼ìŠ¤",
          tags:["ë°˜íŒ”ì…”ì¸ ","ë°ë‹˜ì‡¼ì¸ "],
          desc:"ìŠ¤íŠ¸ë¼ì´í”„ ë°˜íŒ” ì…”ì¸ ì™€ ë°ë‹˜ ì‡¼ì¸  ì¡°í•©.",
          saves: 230,
          imageUrl: "images/image.png" },
        { title: "í™”ì´íŠ¸ ì›í”¼ìŠ¤ ë°ì´íŠ¸",
          tags:["í™”ì´íŠ¸ì›í”¼ìŠ¤","ìƒŒë“¤"],
          desc:"ë°”ëŒì— ì‚´ë‘ê±°ë¦¬ëŠ” í™”ì´íŠ¸ ì›í”¼ìŠ¤ ë°ì´íŠ¸ ì½”ë””.",
          saves: 210,
          imageUrl: "images/image.png" },
        { title: "ì¹´ê³  ì‡¼ì¸  ìŠ¤íŠ¸ë¦¿",
          tags:["ì¹´ê³ ì‡¼ì¸ ","ì˜¤ë²„í•í‹°"],
          desc:"ì¹´ê³  ë°˜ë°”ì§€ì™€ ì˜¤ë²„í• í‹°ì…”ì¸ ë¡œ í™í•œ ìŠ¤íŠ¸ë¦¿ ë£©.",
          saves: 200,
          imageUrl: "images/image.png" },
        { title: "ìŠ¬ëŸ½ í‹°ì…”ì¸  ë°ì¼ë¦¬",
          tags:["ìŠ¬ëŸ½í‹°","ë°ë‹˜"],
          desc:"ìŠ¬ëŸ½ í‹°ì…”ì¸ ì™€ ë¼ì´íŠ¸ ë°ë‹˜ ì¡°í•©ì˜ ê¸°ë³¸ ì—¬ë¦„ ì½”ë””.",
          saves: 190,
          imageUrl: "images/image.png" },
        { title: "íŒŒìŠ¤í…” ì…”ì¸  ì»¤í”Œë£©",
          tags:["íŒŒìŠ¤í…”ì…”ì¸ ","ì»¤í”Œë£©"],
          desc:"íŒŒìŠ¤í…” í†¤ ì…”ì¸ ë¡œ ë§ì¶° ì…ëŠ” ì¸ë¨¸ ì»¤í”Œ ì½”ë””.",
          saves: 180,
          imageUrl: "images/image.png" }
      ],
      autumn: [
        { title: "ê°€ì„ ë¯¸ë‹ˆë©€ ì…‹ì—… ì½”ë””",
          tags:["ë¯¸ë‹ˆë©€ë£©","ë°ì¼ë¦¬ë£©","ë‚¨ì¹œë£©"],
          desc:"ë¸Œë¼ìš´ ê³„ì—´ ìƒì˜ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ í™”ì´íŠ¸ ì…”ì¸ ì™€ í¬ë¦¼ ìŠ¬ë™ìŠ¤ë¥¼ ë§¤ì¹˜í•œ ë¯¸ë‹ˆë©€í•˜ë©´ì„œë„ ë”°ëœ»í•œ ê°€ì„ ë‚¨ì¹œë£©.",
          saves: 310,
          imageUrl: "images/image1.png" },
        { title: "ë¸Œë¼ìš´ ì¬í‚· + ë¸”ë™ ë°ë‹˜ ì„¸ë¯¸í¬ë©€ë£©",
          tags:["ì„¸ë¯¸í¬ë©€","ë°ì¼ë¦¬ ì˜¤í”¼ìŠ¤ë£©","ë¯¸ë‹ˆë©€ë£©"],
          desc:"ë¸Œë¼ìš´&í¬ë¦¼ì˜ ë”°ëœ»í•œ ì¡°í•©ì— ë¸”ë™ íŒ¬ì¸ ë¡œ ê¹”ë”í•˜ê²Œ ë§ˆë¬´ë¦¬í•œ ì•ˆì •ì ì¸ ê°ì„±, ì§€ì ì¸ ë¶„ìœ„ê¸°ì˜ ì½”ë””.",
          saves: 290,
          imageUrl: "images/image2.png" },
        { title: "ê°€ì„ ë¡±ì½”íŠ¸ + ë¨¸í”ŒëŸ¬ ê°ì„±ë£©",
          tags:["ê°€ì„ ê°ì„±ë£©","ë°ì´íŠ¸ë£©","ë”°ëœ»í•œ ë ˆì´ì–´ë“œë£©"],
          desc:"ê°€ì„ ì‹œì¦Œ ê°€ì„±ë¹„ ì¢‹ì€ ì¡°í•©. ë¸Œë¼ìš´ ë¨¸í”ŒëŸ¬ê°€ í¬ì¸íŠ¸ ì—­í• ì„ í•˜ë©° ì „ì²´ í†¤ì„ ë¶€ë“œëŸ½ê²Œ ì¡ì•„ì¤Œ. ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ê°€ì„ ë°ì´íŠ¸ë£© ì½”ë””.",
          saves: 270,
          imageUrl: "images/image3.png" },
        { title: "ë‹ˆíŠ¸ ì¡°ë¼ ì…”ì¸ ",
          tags:["ë‹ˆíŠ¸ì¡°ë¼","ì…”ì¸ "],
          desc:"ê°€ì„ êµë³µ ê°™ì€ ë‹ˆíŠ¸ ì¡°ë¼+ì…”ì¸  ì¡°í•©.",
          saves: 250,
          imageUrl: "images/image6.png" },
        { title: "ì²´í¬ ì…”ì¸  + í¬ë¦¼ íŒ¬ì¸  ê°€ì„ ê°ì„±ë£©",
          tags:["ê°€ì„ ê°ì„±ë£©","ë¹ˆí‹°ì§€ ì²´í¬ì½”ë””"],
          desc:"ì”ì”í•œ ì²´í¬ì™€ í¬ë¦¼ íŒ¬ì¸  ì¡°í•©ì€ ë°ì¼ë¦¬ì—ì„œ ê°€ì¥ ë§ì´ ì“°ì´ëŠ” ê°€ì„ ì½”ë””.",
          saves: 220,
          imageUrl: "images/image7.png" },
        { title: "ì•¼ìƒ ì í¼ ìºì£¼ì–¼",
          tags:["ì•¼ìƒ","í›„ë“œ","ì¡°ê±°"],
          desc:"ì•¼ìƒ ì í¼ì™€ í›„ë“œ, ì¡°ê±° íŒ¬ì¸ ë¥¼ ë§¤ì¹˜í•œ í¸í•œ ì½”ë””.",
          saves: 210,
          imageUrl: "images/image.png" },
        { title: "í•˜í”„ì½”íŠ¸ ì„¸ë¯¸í¬ë©€",
          tags:["í•˜í”„ì½”íŠ¸","ì…”ì¸ ","ìŠ¬ë™ìŠ¤"],
          desc:"í•˜í”„ì½”íŠ¸ë¡œ ë§ˆë¬´ë¦¬í•˜ëŠ” í”„ë ˆì  í…Œì´ì…˜ ì½”ë””.",
          saves: 200,
          imageUrl: "images/image.png" },
        { title: "ë‹¤í¬ë¸Œë¼ìš´ í´ë˜ì‹ ìˆ˜íŠ¸ ì½”ë””",
  tags: ["ë¸Œë¼ìš´ìˆ˜íŠ¸", "í´ë˜ì‹", "ê°€ì„ì½”ë””", "ì„¸ë ¨ëœ", "ë°ì´íŠ¸ë£©"],
  desc: "ë‹¤í¬ë¸Œë¼ìš´ ìˆ˜íŠ¸ì™€ ì•„ì´ë³´ë¦¬ ì´ë„ˆë¡œ ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë¶„ìœ„ê¸°ë¥¼ ê°•ì¡°í•œ í´ë˜ì‹ í¬ë©€ë£©. ì„±ìˆ™í•œ ê°ì„±ì˜ ë°ì´íŠ¸ ì½”ë””.",
          saves: 185,
          imageUrl: "images/image13.png" }
      ],
      winter: [
        { title: "ë¡±íŒ¨ë”© êµë³µ ì½”ë””",
          tags:["ë¡±íŒ¨ë”©","êµë³µ","í›„ë“œ"],
          desc:"ë¸”ë™ ë¡±íŒ¨ë”©ê³¼ í›„ë“œë¡œ ì™„ì„±í•˜ëŠ” ê²¨ìš¸ êµë³µ ì½”ë””.",
          saves: 400,
          imageUrl: "images/image.png" },
        { title: "ì½”íŠ¸ + ë¨¸í”ŒëŸ¬ ë°ì´íŠ¸",
          tags:["ë¡±ì½”íŠ¸","ë¨¸í”ŒëŸ¬","ë‹ˆíŠ¸"],
          desc:"ë¡±ì½”íŠ¸ì™€ ë¨¸í”ŒëŸ¬ë¡œ ë”°ëœ»í•˜ê²Œ ê°ì‹¼ ê²¨ìš¸ ë°ì´íŠ¸ë£©.",
          saves: 380,
          imageUrl: "images/image.png" },
        { title: "íŒ¨ë”© + ì¡°ê±° ìº í¼ìŠ¤",
          tags:["íŒ¨ë”©","ì¡°ê±°","í›„ë“œ"],
          desc:"í›„ë“œ ìœ„ íŒ¨ë”©, ì¡°ê±° íŒ¬ì¸  ì¡°í•©ì˜ ê¸°ë³¸ ê²¨ìš¸ ìº í¼ìŠ¤ë£©.",
          saves: 360,
          imageUrl: "images/image.png" },
        { title: "ë‹ˆíŠ¸ ì›í”¼ìŠ¤ ê²¨ìš¸ ë°ì´íŠ¸",
          tags:["ë‹ˆíŠ¸ì›í”¼ìŠ¤","ë¶€ì¸ "],
          desc:"ë‹ˆíŠ¸ ì›í”¼ìŠ¤ì™€ ë¡±ë¶€ì¸ ë¡œ ì™„ì„±í•œ ê²¨ìš¸ ë°ì´íŠ¸ë£©.",
          saves: 340,
          imageUrl: "images/image.png" },
        { title: "ìˆíŒ¨ë”© ìŠ¤íŠ¸ë¦¿",
          tags:["ìˆíŒ¨ë”©","ì™€ì´ë“œíŒ¬ì¸ "],
          desc:"ìˆíŒ¨ë”©ê³¼ ì™€ì´ë“œ íŒ¬ì¸ ë¡œ ë³¼ë¥¨ê° ì‚´ë¦° ìŠ¤íŠ¸ë¦¿ ë£©.",
          saves: 320,
          imageUrl: "images/image.png" },
        { title: "í„°í‹€ë„¥ + ì½”íŠ¸ ì˜¤í”¼ìŠ¤",
          tags:["í„°í‹€ë„¥","ì½”íŠ¸","ìŠ¬ë™ìŠ¤"],
          desc:"í„°í‹€ë„¥ ìœ„ì— ì½”íŠ¸ë¥¼ ê±¸ì¹œ ì˜¤í”¼ìŠ¤ ê²¨ìš¸ë£©.",
          saves: 300,
          imageUrl: "images/image.png" },
        { title: "í›„ë¦¬ìŠ¤ ì§‘ì—… ë°ì¼ë¦¬",
          tags:["í›„ë¦¬ìŠ¤","ì¡°ê±°"],
          desc:"í›„ë¦¬ìŠ¤ ì§‘ì—…ê³¼ ì¡°ê±° íŒ¬ì¸ ì˜ í¸í•œ ë°ì¼ë¦¬ ì½”ë””.",
          saves: 280,
          imageUrl: "images/image.png" },
        { title: "ê²½ëŸ‰ íŒ¨ë”© ì´ë„ˆ ì½”ë””",
          tags:["ê²½ëŸ‰íŒ¨ë”©","ì½”íŠ¸"],
          desc:"ê²½ëŸ‰ íŒ¨ë”©ì„ ì´ë„ˆë¡œ ë„£ì€ ë³´ì˜¨ ë ˆì´ì–´ë“œ.",
          saves: 270,
          imageUrl: "images/image.png" }
      ]
    };

    const ITEMS_PER_PAGE = 8;
    let currentSeason = 'spring';
    let currentPage = 1;

    const rankGrid       = document.getElementById('rankGrid');
    const rankPagination = document.getElementById('rankPagination');
    const rankCaption    = document.getElementById('rankCaption');
    const seasonButtons  = document.querySelectorAll('.rank-season-btn');

    /* ===== ëª¨ë‹¬ ìš”ì†Œ ===== */
    const modalBackdrop = document.getElementById('rankModalBackdrop');
    const modalCloseBtn = document.getElementById('modalCloseBtn');
    const modalTitleEl  = document.getElementById('modalTitle');
    const modalImgEl    = document.getElementById('modalImage');
    const modalTagsEl   = document.getElementById('modalTags');
    const modalMetaEl   = document.getElementById('modalMeta');
    const modalDescEl   = document.getElementById('modalDesc');
    const modalFavBtn   = document.getElementById('modalFavBtn');

    let modalCurrentItem = null;
    let modalCurrentSeason = null;
    let modalCurrentRank = null;

    // ì¹´ë“œ ì°œ ë²„íŠ¼ ìƒíƒœ ë™ê¸°í™”
    function syncRankingFavButton(btn, favId) {
      if (!btn) return;
      if (isFavoriteById(favId)) {
        btn.textContent = 'â™¥ ì°œ í•´ì œ';
        btn.classList.add('is-favorited');
      } else {
        btn.textContent = 'â™¡ ì°œí•˜ê¸°';
        btn.classList.remove('is-favorited');
      }
    }

    // ëª¨ë‹¬ ì°œ ë²„íŠ¼ ìƒíƒœ ë™ê¸°í™”
    function updateModalFavoriteButton() {
      if (!modalCurrentItem) return;
      const favId = makeFavoriteId(modalCurrentItem, modalCurrentSeason, modalCurrentRank);
      if (isFavoriteById(favId)) {
        modalFavBtn.textContent = 'â™¥ ë‚˜ë§Œì˜ ì˜·ì¥ì—ì„œ ë¹¼ê¸°';
        modalFavBtn.classList.add('is-favorited');
      } else {
        modalFavBtn.textContent = 'â™¡ ë‚˜ë§Œì˜ ì˜·ì¥ì— ë‹´ê¸°';
        modalFavBtn.classList.remove('is-favorited');
      }
    }

    // ëª¨ë‹¬ì—ì„œ ì°œ ìƒíƒœê°€ ë°”ë€Œì—ˆì„ ë•Œ ì¹´ë“œ ë²„íŠ¼ë„ ê°±ì‹ 
    function updateRankingCardFavoriteUI(favId) {
      const btns = document.querySelectorAll('.rank-like-btn');
      btns.forEach(btn => {
        if (btn.dataset.favId === favId) {
          syncRankingFavButton(btn, favId);
        }
      });
    }

    function openModal(item, season, rank) {
      modalCurrentItem = item;
      modalCurrentSeason = season;
      modalCurrentRank = rank;

      modalTitleEl.textContent = item.title;
      modalImgEl.src = item.imageUrl || '';
      modalImgEl.alt = item.title;

      modalTagsEl.innerHTML = '';
      (item.tags || []).forEach(t => {
        const span = document.createElement('span');
        span.className = 'rank-tag';
        span.textContent = t;
        modalTagsEl.appendChild(span);
      });

      modalMetaEl.textContent = `ì €ì¥ ìˆ˜ ${item.saves}íšŒ Â· ë­í‚¹ #${rank}`;
      modalDescEl.textContent = item.desc || '';

      updateModalFavoriteButton();
      modalBackdrop.classList.add('show');
    }

    function closeModal() {
      modalBackdrop.classList.remove('show');
    }

    modalCloseBtn.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', e => {
      if (e.target === modalBackdrop) closeModal();
    });

    modalFavBtn.addEventListener('click', () => {
      if (!modalCurrentItem) return;
      const favId = makeFavoriteId(modalCurrentItem, modalCurrentSeason, modalCurrentRank);

      if (isFavoriteById(favId)) {
        const ok = removeFavoriteById(favId);
        if (ok) {
          alert('ë‚˜ë§Œì˜ ì˜·ì¥ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.');
          updateModalFavoriteButton();
          updateRankingCardFavoriteUI(favId);
        }
      } else {
        const ok = addFavoriteFromRanking(modalCurrentItem, modalCurrentSeason, modalCurrentRank);
        if (ok) {
          alert('ë‚˜ë§Œì˜ ì˜·ì¥ì— ë‹´ì•˜ìŠµë‹ˆë‹¤!');
          updateModalFavoriteButton();
          updateRankingCardFavoriteUI(favId);
        }
      }
    });

    /* ===== ë­í‚¹ ë Œë”ë§ ===== */
    function renderRanking() {
      const list = rankingData[currentSeason];
      const totalItems = list.length;
      const totalPages = Math.max(1, Math.ceil(totalItems / ITEMS_PER_PAGE));

      if (currentPage > totalPages) currentPage = totalPages;
      if (currentPage < 1) currentPage = 1;

      const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
      const endIndex   = startIndex + ITEMS_PER_PAGE;
      const slice      = list.slice(startIndex, endIndex);

      const seasonLabel = {
        spring: 'ë´„',
        summer: 'ì—¬ë¦„',
        autumn: 'ê°€ì„',
        winter: 'ê²¨ìš¸'
      }[currentSeason];

      rankCaption.textContent =
        `${seasonLabel} ì‹œì¦Œ ì¸ê¸° ì½”ë”” TOP ${totalItems} Â· ${currentPage}í˜ì´ì§€ (${ITEMS_PER_PAGE}ê°œì”© í‘œì‹œ)`;

      // ì¹´ë“œ ë Œë”ë§
      rankGrid.innerHTML = '';

      slice.forEach((item, idx) => {
        const rank = startIndex + idx + 1;
        const card = document.createElement('article');
        card.className = 'rank-card';

        const isTop3 = rank <= 3;
        const badge = document.createElement('div');
        badge.className = 'rank-badge' + (isTop3 ? ' top3' : '');
        badge.textContent = `#${rank}`;
        card.appendChild(badge);

        const thumb = document.createElement('div');
        thumb.className = 'rank-thumb';
        if (item.imageUrl) {
          const img = document.createElement('img');
          img.src = item.imageUrl;
          img.alt = item.title;
          thumb.appendChild(img);
        }
        card.appendChild(thumb);

        const title = document.createElement('div');
        title.className = 'rank-title';
        title.textContent = item.title;
        card.appendChild(title);

        const tagRow = document.createElement('div');
        tagRow.className = 'rank-tags';
        (item.tags || []).forEach(t => {
          const span = document.createElement('span');
          span.className = 'rank-tag';
          span.textContent = t;
          tagRow.appendChild(span);
        });
        card.appendChild(tagRow);

        const desc = document.createElement('p');
        desc.className = 'rank-desc';
        desc.textContent = item.desc || '';
        card.appendChild(desc);

        const meta = document.createElement('div');
        meta.className = 'rank-meta';
        const left = document.createElement('span');
        left.textContent = `ì €ì¥ ìˆ˜ ${item.saves}íšŒ`;

        const right = document.createElement('button');
        right.className = 'rank-like-btn';
        right.type = 'button';

        const favId = makeFavoriteId(item, currentSeason, rank);
        right.dataset.favId = favId;

        syncRankingFavButton(right, favId);

        right.addEventListener('click', (e) => {
          e.stopPropagation();
          if (isFavoriteById(favId)) {
            const ok = removeFavoriteById(favId);
            if (ok) {
              alert('ë‚˜ë§Œì˜ ì˜·ì¥ì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.');
              syncRankingFavButton(right, favId);
            }
          } else {
            const ok = addFavoriteFromRanking(item, currentSeason, rank);
            if (ok) {
              alert('ë‚˜ë§Œì˜ ì˜·ì¥ì— ë‹´ì•˜ìŠµë‹ˆë‹¤!');
              syncRankingFavButton(right, favId);
            }
          }
        });

        meta.appendChild(left);
        meta.appendChild(right);
        card.appendChild(meta);

        card.addEventListener('click', () => openModal(item, currentSeason, rank));

        rankGrid.appendChild(card);
      });

      // í˜ì´ì§€ë„¤ì´ì…˜
      rankPagination.innerHTML = '';
      const listEl = document.createElement('div');
      listEl.style.display = 'flex';
      listEl.style.gap = '4px';

      const prevBtn = document.createElement('button');
      prevBtn.textContent = 'ì´ì „';
      prevBtn.className = 'page-btn' + (currentPage === 1 ? ' disabled' : '');
      if (currentPage > 1) {
        prevBtn.addEventListener('click', () => {
          currentPage--;
          renderRanking();
        });
      }
      listEl.appendChild(prevBtn);

      for (let p = 1; p <= totalPages; p++) {
        const btn = document.createElement('button');
        btn.textContent = p;
        btn.className = 'page-btn' + (p === currentPage ? ' active' : '');
        if (p !== currentPage) {
          btn.addEventListener('click', () => {
            currentPage = p;
            renderRanking();
          });
        }
        listEl.appendChild(btn);
      }

      const nextBtn = document.createElement('button');
      nextBtn.textContent = 'ë‹¤ìŒ';
      nextBtn.className = 'page-btn' + (currentPage === totalPages ? ' disabled' : '');
      if (currentPage < totalPages) {
        nextBtn.addEventListener('click', () => {
          currentPage++;
          renderRanking();
        });
      }
      listEl.appendChild(nextBtn);

      rankPagination.appendChild(listEl);
    }

    // ì‹œì¦Œ ë²„íŠ¼ ì´ë²¤íŠ¸
    seasonButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const season = btn.dataset.season;
        if (season === currentSeason) return;
        currentSeason = season;
        currentPage = 1;
        seasonButtons.forEach(b => b.classList.toggle('active', b === btn));
        renderRanking();
      });
    });

    // ì´ˆê¸° ì‹¤í–‰
    refreshAuthUI();
    setupLogout();
    renderRanking();
</script>
</body>
</html>
